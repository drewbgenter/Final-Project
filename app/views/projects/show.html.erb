<div class="page-header">
  <h1><%= @project.title %></h1>
</div>

<dl class="dl-horizontal">

  <dt>Description</dt>
  <dd><%= @project.description %></dd>

  <dt>Deadline</dt>
  <dd><%= @project.deadline.strftime('%a %D %r') %></dd>

  <dt>Created By</dt>
  <dd><%= @project.user.name %></dd>

</dl>

<h2>To Do List</h2>
<table class="table table-hover">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Status</th>
    </tr>
  </thead>

  <tbody>
    <% @project.tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.description %></td>
        <td>
      <% if task.claimer.nil? %>
        <form action="/claim_task/<%= task.id %>" class="form-horizontal">
          <input type="hidden" id="claimer" name="claimer" class="form-control" value="<%= current_user.name %>">
          <input type="submit" value="Claim Task" class="btn btn-warning">
        </form>
      <% else %>
          Claimed By <%= task.claimer %>
      <% end %>
        </td>
      <% if task.user_id == current_user.id %>
        <td>
          <a href="/delete_task/<%= task.id %>" class="btn btn-danger">
            <i class="fa fa-trash-o"></i>
          </a>
        </td>
      <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<form action="/create_task" class="form-horizontal">
  <!-- Label and input for title -->
  <div class="form-group">
    <label for="title" class="col-sm-2 control-label">
      Title
    </label>
    <div class="col-sm-4">
      <textarea id="title" name="title" placeholder="To Do" class="form-control" rows="1"></textarea>
    </div>
  </div>

  <!-- Label and input for deadline -->
  <div class="form-group">

    <div class="col-sm-10">
      <input type="hidden" id="deadline" name="deadline" placeholder="deadline" class="form-control" value="<%= @project.deadline %>">
    </div>
  </div>

  <!-- Label and input for description -->

  <div class="form-group">
    <label for="description" class="col-sm-2 control-label">
      Description
    </label>
    <div class="col-sm-10">
      <textarea id="description" name="description" placeholder="To Do" class="form-control" rows="3"></textarea>
    </div>
  </div>

  <!-- Label and input for user_id -->
  <div class="form-group">

    <div class="col-sm-10">
      <input type="hidden" id="user_id" name="user_id" placeholder="user" class="form-control" value="<%= current_user.id %>">
    </div>
  </div>

  <!-- Label and input for project_id -->
  <div class="form-group">

    <div class="col-sm-10">
      <input type="hidden" id="project_id" name="project_id" placeholder="Project" class="form-control" value="<%= @project.id %>">
    </div>
  </div>

  <!-- Label and input for user_id -->
  <div class="form-group">
    <div class="col-sm-10">
      <input type="hidden" id="user_id" name="user_id" placeholder="User" class="form-control" value="<%= current_user.id %>">
    </div>
  </div>


  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <input type="submit" value="Create Task" class="btn btn-primary">
    </div>
  </div>
</form>
